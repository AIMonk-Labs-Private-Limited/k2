

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>utils &mdash; k2 1.6 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="version" href="version.html" />
    <link rel="prev" title="SymbolTable" href="symbol_table.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> k2
          

          
          </a>

          
            
            
              <div class="version">
                1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_concepts/index.html">Core concepts in k2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fsa.html">Fsa</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctc_loss.html">CTC Loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="dense_fsa.html">DenseFsaVec</a></li>
<li class="toctree-l2"><a class="reference internal" href="fsa_algo.html">Fsa Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="symbol_table.html">SymbolTable</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#to-str">to_str</a></li>
<li class="toctree-l3"><a class="reference internal" href="#to-str-simple">to_str_simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="#to-tensor">to_tensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#to-dot">to_dot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-fsa-vec">create_fsa_vec</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-rand-equivalent">is_rand_equivalent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-sparse">create_sparse</a></li>
<li class="toctree-l3"><a class="reference internal" href="#random-fsa">random_fsa</a></li>
<li class="toctree-l3"><a class="reference internal" href="#random-fsa-vec">random_fsa_vec</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="version.html">version</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops.html">ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="ragged_ops.html">ragged_ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="ragged_tensor.html">k2.ragged</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">k2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Python API reference</a> &raquo;</li>
        
      <li>utils</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/k2-fsa/k2/blob/master/k2/docs/source/python_api/utils.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utils">
<h1>utils<a class="headerlink" href="#utils" title="Permalink to this headline">¶</a></h1>
<div class="section" id="to-str">
<h2>to_str<a class="headerlink" href="#to-str" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.to_str">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">to_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fsa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openfst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L34-L63"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.to_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an Fsa to a string.  This version prints out all integer
labels and integer ragged labels on the same line as each arc, the
same format accepted by Fsa.from_str().</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned string can be used to construct an Fsa with Fsa.from_str(),
but you would need to know the names of the auxiliary labels and ragged
labels.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>openfst</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optional. If true, we negate the scores during the conversion.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string representation of the Fsa.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="to-str-simple">
<h2>to_str_simple<a class="headerlink" href="#to-str-simple" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.to_str_simple">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">to_str_simple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fsa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openfst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L66-L88"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.to_str_simple" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an Fsa to a string.  This is less complete than Fsa.to_str(),
fsa.__str__(), or to_str_full(), meaning it prints only fsa.aux_labels and
no ragged labels, not printing any other attributes.  This is used in
testing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned string can be used to construct an Fsa.  See also to_str().</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>openfst</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optional. If true, we negate the scores during the conversion.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string representation of the Fsa.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="to-tensor">
<h2>to_tensor<a class="headerlink" href="#to-tensor" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.to_tensor">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">to_tensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fsa</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L91-L109"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.to_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an Fsa to a Tensor.</p>
<p>You can save the tensor to disk and read it later
to construct an Fsa.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned Tensor contains only the transition rules, e.g.,
arcs. You may want to save its aux_labels separately if any.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fsa</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Fsa</span></code>) – The input Fsa.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <cite>torch.Tensor</cite> of dtype <cite>torch.int32</cite>. It is a 2-D tensor
if the input is a single FSA. It is a 1-D tensor if the input
is a vector of FSAs.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="to-dot">
<h2>to_dot<a class="headerlink" href="#to-dot" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.to_dot">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">to_dot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fsa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L112-L250"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.to_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize an Fsa via graphviz.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Graphviz is needed only when this function is called.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fsa</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Fsa</span></code>) – The input FSA to be visualized.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Optional. The title of the resulting visualization.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Digraph</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a Diagraph from grahpviz.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="create-fsa-vec">
<h2>create_fsa_vec<a class="headerlink" href="#create-fsa-vec" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.create_fsa_vec">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">create_fsa_vec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fsas</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L253-L307"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.create_fsa_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an FsaVec from a list of FSAs</p>
<p>We use the following rules to set the attributes of the output FsaVec:</p>
<ul class="simple">
<li><p>For tensor attributes, we assume that all input FSAs have the same
attribute name and the values are concatenated.</p></li>
<li><p>For non-tensor attributes, if any two of the input FSAs have the same
attribute name, then we assume that their attribute values are equal and
the output FSA will inherit the attribute.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fsas</strong> – A list of <cite>Fsa</cite>. Each element must be a single FSA.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Fsa</span></code> that represents a FsaVec.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="is-rand-equivalent">
<h2>is_rand_equivalent<a class="headerlink" href="#is-rand-equivalent" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.is_rand_equivalent">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">is_rand_equivalent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_semiring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treat_epsilons_specially</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L310-L359"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.is_rand_equivalent" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the Fsa <cite>a</cite> appears to be equivalent to <cite>b</cite> by
randomly checking some symbol sequences in them.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>It works only on CPU.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Fsa</span></code>) – One of the input FSA. It can be either a single FSA or an FsaVec.
Must be top-sorted and on CPU.</p></li>
<li><p><strong>b</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Fsa</span></code>) – The other input FSA. It must have the same NumAxes() as a.
Must be top-sorted and on CPU.</p></li>
<li><p><strong>log_semiring</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – The semiring to be used for all weight measurements;
if false then we use ‘max’ on alternative paths; if
true we use ‘log-add’.</p></li>
<li><p><strong>beam</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – beam &gt; 0 that affects pruning; the algorithm will only check
paths within <cite>beam</cite> of the total score of the lattice (for
tropical semiring, it’s max weight over all paths from start
state to final state; for log semiring, it’s log-sum probs over
all paths) in <cite>a</cite> or <cite>b</cite>.</p></li>
<li><p><strong>treat_epsilons_specially</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – We’ll do <cite>intersection</cite> between generated path and a or b when
check equivalence. Generally, if it’s true, we will treat
epsilons as epsilon when doing intersection; Otherwise, epsilons
will just be treated as any other symbol.</p></li>
<li><p><strong>delta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Tolerance for path weights to check the equivalence.
If abs(weights_a, weights_b) &lt;= delta, we say the two
paths are equivalent.</p></li>
<li><p><strong>npath</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of paths will be generated to check the
equivalence of <cite>a</cite> and <cite>b</cite></p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the Fsa <cite>a</cite> appears to be equivalent to <cite>b</cite> by randomly
generating <cite>npath</cite> paths from one of them and then checking if the symbol
sequence exists in the other one and if the total weight for that symbol
sequence is the same in both FSAs.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="create-sparse">
<h2>create_sparse<a class="headerlink" href="#create-sparse" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.create_sparse">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">create_sparse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_col_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L362-L421"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.create_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a utility function that creates a (torch) sparse matrix likely
intended to represent posteriors.  The likely usage is something like
(for example):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">post</span> <span class="o">=</span> <span class="n">k2</span><span class="o">.</span><span class="n">create_sparse</span><span class="p">(</span><span class="n">fsa</span><span class="o">.</span><span class="n">seqframe</span><span class="p">,</span> <span class="n">fsa</span><span class="o">.</span><span class="n">phones</span><span class="p">,</span>
                        <span class="n">fsa</span><span class="o">.</span><span class="n">get_arc_post</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">exp</span><span class="p">(),</span>
                        <span class="n">min_col_index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>(assuming <cite>seqframe</cite> and <cite>phones</cite> were integer-valued attributes of <cite>fsa</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – Row indexes of the sparse matrix (a torch.Tensor), which must have
values &gt;= 0; likely <cite>fsa.seqframe</cite>.   Must have row_indexes.dim == 1.
Will be converted to <cite>dtype=torch.long</cite></p></li>
<li><p><strong>cols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – Column indexes of the sparse matrix, with the same shape as <cite>rows</cite>.
Will be converted to <cite>dtype=torch.long</cite></p></li>
<li><p><strong>values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – Values of the sparse matrix, likely of dtype float or double, with
the same shape as <cite>rows</cite> and <cite>cols</cite>.</p></li>
<li><p><strong>size</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – Optional. If not None, it is assumed to be a tuple containing
<cite>(num_frames, highest_phone_plus_one)</cite></p></li>
<li><p><strong>min_col_index</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – If provided, before the sparse tensor is constructed we will filter out
elements with <cite>cols[i] &lt; min_col_index</cite>.  Will likely be 0 or 1, if
set.  This is necessary if <cite>col_indexes</cite> may have values less than 0,
or if you want to filter out 0 values (e.g. as representing blanks).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns a torch.Tensor that is sparse with coo (coordinate) format,
i.e. <cite>layout=torch.sparse_coo</cite> (which is actually the only sparse format
that torch currently supports).</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="random-fsa">
<h2>random_fsa<a class="headerlink" href="#random-fsa" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.random_fsa">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">random_fsa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acyclic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_symbol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_num_arcs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_num_arcs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L613-L632"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.random_fsa" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a random Fsa.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acyclic</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, generated Fsa will be acyclic.</p></li>
<li><p><strong>max_symbol</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – <dl class="simple">
<dt>Maximum symbol on arcs. Generated arc symbols will be in range</dt><dd><p>[-1,max_symbol], note -1 is kFinalSymbol; must be at least 0;</p>
</dd>
<dt>min_num_arcs:</dt><dd><p>Minimum number of arcs; must be at least 0.</p>
</dd>
<dt>max_num_arcs:</dt><dd><p>Maximum number of arcs; must be &gt;= min_num_arcs.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Fsa</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="random-fsa-vec">
<h2>random_fsa_vec<a class="headerlink" href="#random-fsa-vec" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k2.random_fsa_vec">
<span class="sig-prename descclassname"><span class="pre">k2.</span></span><span class="sig-name descname"><span class="pre">random_fsa_vec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_num_fsas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_num_fsas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acyclic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_symbol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_num_arcs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_num_arcs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/k2-fsa/k2/blob/master/k2/python/k2/utils.py#L635-L663"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k2.random_fsa_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a random FsaVec.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_num_fsas</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Minimum number of fsas we’ll generated in the returned FsaVec;
must be at least 1.</p></li>
<li><p><strong>max_num_fsas</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Maximum number of fsas we’ll generated in the returned FsaVec;
must be &gt;= min_num_fsas.</p></li>
<li><p><strong>acyclic</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, generated Fsas will be acyclic.</p></li>
<li><p><strong>max_symbol</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Maximum symbol on arcs. Generated arcs’ symbols will be in range
[-1,max_symbol], note -1 is kFinalSymbol; must be at least 0;</p></li>
<li><p><strong>min_num_arcs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Minimum number of arcs in each Fsa; must be at least 0.</p></li>
<li><p><strong>max_num_arcs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Maximum number of arcs in each Fsa; must be &gt;= min_num_arcs.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Fsa</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="version.html" class="btn btn-neutral float-right" title="version" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="symbol_table.html" class="btn btn-neutral float-left" title="SymbolTable" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, k2 development team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>